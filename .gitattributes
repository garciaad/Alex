<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work!!</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="css/cto.css">
</head>
<body >
    

    <div class="container" style="color: #f0f8ff;">
        <h2 id="titulo_accion_formulario" class="my-5">Contactanos!</h2>
        <form class="mt-6 mb-6" id="mi_formulario">
            <div class="mb-6">
                <label for="nombre_user" class="form-label">Nombre</label>
                <input type="email" class="form-control" id="nombre_user">
            </div>
            <div class="mb-6">
                <label for="telefono_user" class="form-label">Telefono</label>
                <input type="text" class="form-control" id="telefono_user">
            </div>
            <div class="mb-6">
                <label for="direccion_mail" class="form-label">E-mail</label>
                <input type="text" class="form-control" id="direccion_mail">
            </div>
            <button id="boton_formulario" type="button" class="btn btn-primary" onclick="guardar_data()">Guardar</button>
        </form>
        <h4 class="">Datos</h4>
        <div>
            <table class="table table-striped" style="color: #f0f8ff;">
                <thead>
                    <tr>
                        <th scope="col">Nombre</th>
                        <th scope="col">Telefono</th>
                        <th scope="col">E-mail</th>
                    </tr>
                </thead>
                <tbody id="data-usuario-read"></tbody>
            </table>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>    <script src="js/ct.js"></script>   
        <script src="js/ct.js"></script>
    </body>
</html>

* {
    font-family: 'Arvo', serif;
}

.container {
    background: #B5DEFF;
    
}


input {
border-radius: 5px;
border: solid;
border-color: #B5DEFF;
}

var input_nombre = document.getElementById('nombre_user')
var input_telefono = document.getElementById('telefono_user')
var input_direccion = document.getElementById('direccion_mail')

debugger
function guardar_data() {
    let contador_data = 1
    if (localStorage.getItem("contador") == null) {
        localStorage.setItem('contador', contador_data)
    } else {
        contador_data = localStorage.getItem("contador")
    }
    var nombre = document.getElementById('nombre_user').value
    var telefono = document.getElementById('telefono_user').value
    var direccion = document.querySelector('#direccion_mail').value
    localStorage.setItem("nombre_" + contador_data, nombre)
    localStorage.setItem("telefono_" + contador_data, telefono)
    localStorage.setItem("direccion_" + contador_data, direccion)
    contador_data = parseInt(contador_data) + 1
    localStorage.setItem("contador", contador_data)
    console.log(contador_data)

    let contador_actual = parseInt(contador_data) - 1
    listado_data(contador_actual)
    document.getElementById("mi_formulario").reset()
    if (actualiza_tabla) {
        let contador_futuro = localStorage.getItem('contador')
        for (let x = 1; x < contador_futuro; x++) {
            body_tabla.innerHTML = `
        <tr>
                <td>${localStorage.getItem('nombre_' + x)}</td>
                <td>${localStorage.getItem('telefono_' + x)}</td>
                <td>${localStorage.getItem('direccion_' + x)}</td>
                <td>
                    <i class="fas fa-pen mx-2" onclick="editar_elemento(${x})"></i>
                    <i class="fas fa-trash mx-2" onclick="borrar_elemento()"></i>
                </td>
        </tr>
            
        for (let id_dato = 1; id_dato <contador_futuro; id_dato++) {
            if (localStorage.getItem('nombre_' + id_dato) != null && localStorage.getItem('telefono_' + id_dato) != null && localStorage.getItem('direccion_' + id_dato)) {
            body_tabla.innerHTML = ()
            
                <tr>
                    <td>${localStorage.getItem('nombre_' + id_dato)}</td>
                    <td>${localStorage.getItem('telefono_' + id_dato)}</td>
                    <td>${localStorage.getItem('direccion_' + id_dato)}</td>
                    <td>
                        <i class="fas fa-pen mx-2" onclick="editar_elemento(${id_dato})"></i>
                        <i class="fas fa-trash mx-2" onclick="borrar_elemento(${id_dato})"></i>
                    </td>
                </tr>
            }
        }
    } else {
        body_tabla.innerHTML += ()
            <td>${localStorage.getItem('direccion_' + contador_actual)}</td>
            <td>
                <i class="fas fa-pen mx-2" onclick="editar_elemento(${contador_actual})"></i>
                <i class="fas fa-trash mx-2" onclick="borrar_elemento()"></i>
                <i class="fas fa-trash mx-2" onclick="borrar_elemento(${contador_actual})"></i>
            </td>

            </tr>
            `
    function editar_elemento_accion(indice_dato) {
        document.getElementById("mi_formulario").reset()
    }
    
    function borrar_elemento() {
        console.error("Se borro")}
    function borrar_elemento(id_dato) {
        Swal.fire({
            title: 'Esta seguro de eliminar el dato?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si, borrar',
            allowOutsideClick: false
        }).then((result) => {
            if (result.isConfirmed) {
                let body_tabla = document.querySelector("#data-usuario-read")
                body_tabla.innerHTML = ''
    
                localStorage.removeItem("nombre_" + id_dato)
                localStorage.removeItem("telefono_" + id_dato)
                localStorage.removeItem("direccion_" + id_dato)
                listado_data(1, true)
    
    
                Swal.fire({
                    title: 'Se elimino el dato',
                    icon: 'success'
                })
                document.getElementById("mi_formulario").reset()
            }
        })
    }}

